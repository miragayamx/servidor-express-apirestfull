<div class="container">
    {{> nav-bar }}
    <h1 class="display-4">Registro de usuario</h1>
    <form action="http://localhost:8080/signup" method="POST" enctype="application/x-www-form-urlencoded"
        id="signup-form">
        <div class="form-group mb-3">
            <label for="user">Ingrese su nombre</label>
            <input class="form-control" id="username" type="text" name="username" required="true" />
        </div>
        <div class="form-group mb-3">
            <label for="user">Ingrese su contraseña</label>
            <input class="form-control" id="password" type="text" name="password" required="true" />
        </div>
        <div class="form-group mb-3">
            <label for="user">Repita su contraseña</label>
            <input class="form-control" id="passwordConfirm" type="password" name="passwordConfirm" required="true" />
        </div>
        <button type="submit" class="btn btn-primary mb-3">Enviar</button>
    </form>
    <button type="button" class="btn btn-primary mb-3" onclick="location.href='/login'">Login</button>
</div>
<script>
    document.getElementById('signup-form').addEventListener('submit', (event) => {
        event.preventDefault();
        const { username, password, passwordConfirm } = event.target;
        const data = {
            username: username.value,
            password: password.value,
            passwordConfirm: passwordConfirm.value
        }
        fetch("/signup", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(() => {
                location.href = '/home';
            })
            .catch((err) => {
                console.log(err);
            });
    })
</script>